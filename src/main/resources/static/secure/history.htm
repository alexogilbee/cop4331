<!DOCTYPE html>
<html>
    <head>
    </head>
    <body onload=request()>
        <h1>Transaction History:</h1>
        <div id="table">
            <table>
                <tr style="background-color:grey">
                    <th>To</th>
                    <th>From</th>
                    <th>Amount</th>
                    <th>Date</th>
                    <th>Memo</th>
                </tr>
                <tr style="background-color:light-grey">
                    <td>Sender</td>
                    <td>Reciever</td>
                    <td>Money</td>
                    <td>At Some Point</td>
                    <td>Meme-O</td>
                </tr>
            </table>
            <br>
            <button type="button" onclick="loadText()">Change Content</button>
        </div>
        
        <br>
        <button onclick="document.location='overview.htm'">Back to Account Overview</button>
        <br>
        <button onclick="document.location='../login.htm'">Log Out</button>

        <script>
            function request() {
                var myObj, txt = "";
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        myObj = JSON.parse(this.responseText);
                        txt += "<table border='1'><th>Sender</th><th>Reciever</th><th>Amount</th><th>Date</th><th>Memo</th>"
                        for (x in myObj) {
                            txt += "<tr><td>" + myObj[x].sid + "</td>";
                            txt += "<td>" + myObj[x].rid + "</td>";
                            txt += "<td>" + myObj[x].amount + "</td>";
                            txt += "<td>" + myObj[x].date + "</td>";
                            txt += "<td>" + myObj[x].memo + "</td></tr>";
                        }
                        txt += "</table>"
                        document.getElementById("table").innerHTML = txt;
                    }
                };
                xhttp.open("GET", "/controller/history", true);
                xhttp.send();
            }
        </script>
    </body>
</html>

<!--- todo:
transactions should probably go to user's perferred account, so other users
    can't snoop on someone else's bank accounts
login checker
will probably be a JS table, to easily sort by field attributes
change account button, to see history of another bank account
--->
