<!DOCTYPE html>
<html>
    <head>
        <script>
            function validateForm() {
                // check if passwords match
                if (signup.password.value != signup.confirm.value) {
                    alert('Error: Passwords must match.');
                    return false;
                }
                // check if uname is taken
                var data = new FormData();
                data.append("uname", signup.uname.value);
                data.append("fname", signup.fname.value);
                data.append("lname", signup.lname.value);
                data.append("password", signup.password.value);
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        // read response
                        if (this.responseText == 'INVALID') {
                            alert('Error: Username is Already Taken.');
                            return false;
                        } else {
                            // success and redirect
                            window.location.href = "login.htm";
                            alert('login time');
                        }
                    } // can probably get error messages here?
                };
                xhttp.open("POST", "/controller/add", false);
                xhttp.send(data);
            }
        </script>
    </head>
    <body>
        <h1>Sign Up:</h1> <!---onsubmit="return validateForm()"-->
        <form name="signup" onsubmit="validateForm(); return false"> <!--- add method="POST" --->
            <label for="uname">Username:</label><br>
            <input type="text" id="uname" name="uname" required><br>
            <label for="fname">First Name:</label><br>
            <input type="text" id="fname" name="fname" required><br>
            <label for="lname">Last Name:</label><br>
            <input type="text" id="lname" name="lname" required><br>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password" required><br>
            <label for="confirm">Confirm Password:</label><br>
            <input type="password" id="confirm" name="confirm" required><br><br>
            <input type="submit" value="Sign Up">
        </form>

        <p>Already have an account? <a href="login.htm">Login</a></p>
    </body>
</html>

<!---todos:
probably want password standards
need to ensure no extraneous characters in fields ($,%,^, etc)
--->
